{{ template "view/signup.html" . }}
<div class="row justify-content-md-center"> 
    <div class="table-responsive">
        <table id="table_users" align="center" class="table table-striped table-hover table-bordered table-sm w70 ">
            <thead>
                <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Login</th>
                    <th scope="col">Status</th>
                    <th scope="col">Ações</th>
                </tr>
            </thead>
            <tbody>
                {{range $val := .Users}}
                    <tr id="{{$val.Id}}" onClick="">
                        <td class="align-middle">{{$val.Id}}</td>
                        <td class="align-middle">{{$val.Nick}}</td>
                        <td class="w20 align-middle">
                            {{if $val.Status}}
                                <span class="badge badge-success">Ativo</span>
                            {{else}}
                                <span class="badge badge-danger">Inativo</span>
                            {{end}}
                        </td>
                        <td class="w10 align-middle">
                            <div class="d-flex  justify-content-between">
                                
                            {{if not $val.Status}}
                                <div class="pl-1 pr-2 pointer">
                                    <i onclick='activateUser("{{ $val.Id }}")' class="fa fa-user text-success fa-2x" title="Ativar"></i>
                                </div>
                            {{else}}
                                <div class="pr-2 pointer">
                                    <i onclick='deleteUser("{{ $val.Id }}")' class="fa fa-user-slash text-danger fa-2x" title="Excluir"></i>
                                </div>
                            {{end}}
                                <div class="pointer">
                                    <i onclick='editUser("{{ $val.Id }}")' class="fa fa-user-cog text-primary fa-2x" title="Editar"></i>
                                </div>
                            </div>
                        </td>
                    </tr>
                {{end}}
            </tbody>
        </table>
    </div>

    <canvas id="myChart" width="400" height="100"></canvas>

<script>
var Audits = {{.Audits}};

var Datasets = [];

var labels = [];

for(i in Audits) {

    var data = new Date(Audits[i].Date);
    data.setHours( data.getHours() + 3 );

    if(labels[data.getHours()] == undefined) {
        labels[data.getHours()] = 1;
    } else {
        labels[data.getHours()]++;
    } 
}

var nome = Object.keys(labels);

labels = labels.filter(function(val){
    return val;
});

for(j in nome) {
    nome[j] = nome[j] + ' Horas';
}

var ctx = document.getElementById("myChart").getContext('2d');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: nome,
        datasets: [{
            label: 'Número de Logins',
            data: labels,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
        }
    }
});
</script>

</div>